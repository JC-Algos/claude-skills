# 2026-02-06

## Config Key Hallucination Bug üêõ
- **Error:** Used `spawnAllowlist` which doesn't exist in Clawdbot schema
- **Correct key:** `agents.list[X].subagents.allowAgents`
- **Impact:** Gateway crashed in a loop due to invalid config, stuck whole day
- **Fix:** `clawdbot doctor --fix` + set correct key
- **Lesson:** ALWAYS check schema before modifying config. Never invent keys.
- **Command to check schema:** `clawdbot config schema` or use `gateway action=config.schema`

## Prevention
Before any config change:
1. Run `gateway action=config.schema` to verify key exists
2. Use `gateway action=config.patch` for safe partial updates
3. Never guess key names - validate first

## Self-Improvement Logging ‚úÖ
- Error logged: `.learnings/ERRORS.md` ‚Üí [ERR-20260206-001]
- Learning logged: `.learnings/LEARNINGS.md` ‚Üí [LRN-20260206-001]
- Promoted to: `AGENTS.md` ‚Üí Config Safety section
- Sub-agent orchestration tested and confirmed working (Coder + WebDev both online)

## Model Switching Behavior (15:46 UTC)
- **Issue:** After changing model in config + gateway restart, active session still uses OLD model
- **Root cause:** Sessions retain their model; config changes only affect NEW sessions
- **Testing:** Switched main agent to opus 4-6, but session_status still showed 4-5
- **Web UI auth:** "device identity required" (1008) error = need to login at base URL first
- **Decision:** Default to opus 4-5 for now (4-6 has "stuck" issues during transfers)
- **Updated:** TOOLS.md with new "OpenClaw Config & Session Behavior" section

## Cron Job Fixes (17:26-17:45 UTC)
- **Root cause:** Gateway instability after config crash + missing TELEGRAM_BOT_TOKEN env var
- **Errors:** `Telegram bot token missing`, `Missing workspace template: AGENTS.md`
- **Fix 1:** Created `/root/clawd/.env` with TELEGRAM_BOT_TOKEN
- **Fix 2:** Updated 6 cron jobs to source .env before running Python scripts
- **Fix 3:** Tested and verified Telegram sends work

## Old Clawdbot Package Removal (Feb 7 03:30 UTC)
- **Issue:** Two packages installed: `clawdbot` (2026.1.24-3) and `openclaw` (2026.2.3-1)
- **Problem:** Template errors referencing `/usr/lib/node_modules/clawdbot/...` path
- **Fix:** `npm uninstall -g clawdbot` (removed 654 packages)
- **Updated:** TOOLS.md commands from `clawdbot` ‚Üí `openclaw`
- **Updated:** daily-auto-update cron job to use `openclaw doctor`
